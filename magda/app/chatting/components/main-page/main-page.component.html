<div [ngStyle]="{height:openFriendsWindow?'480px':'33px'}" id="ng-chat-people"
     class=" dark-theme primary-outline-color primary-background ">
  <a (click)="openFriendsWindow=!openFriendsWindow" class="ng-chat-title secondary-background shadowed"><span
    style="color:white;margin-left: 5px;margin-right: 5px"> Friends </span></a><!---->

  <!----><input class="friends-search-bar " id="ng-chat-search_friend" type="search"
                placeholder="Search"><!---->
  <ul id="ng-chat-users"  class="offset-search" *ngFor="let friend of friends">
    <li>
      <div class="ng-chat-friends-list-container" (click)="add(friend.username)"><!----><!---->
        <div class="row" >
          <div class="col-md-4">
            <img alt="" class="avatar" height="30" width="30" [src]="friendImagePath+friend.personalImage">
          </div>
          <div class="col-md-6" style="background-color: white">
            <strong style="color:blue;margin: 0;width:100%;padding:0 " [title]="friend.username">{{friend.username}}</strong>
            <!----><span *ngIf="unReadMessages.length!=0" style="color:orangered;margin-left: 5px;margin-right: 5px"
                         data-toggle="tooltip" data-placement="right" [title]="friend.username+' un read messages'"
                         class="ng-chat-unread-messages-count unread-messages-counter-container primary-text">{{unReadMessages.length}}</span>
            <span style="margin: 0 4px" class="ng-chat-participant-status online"></span>
          </div>
        </div>

      </div>
    </li>
    <!--  <li>
        <ng-template  #popContent>Hello, <b>{{'name'}}</b>!</ng-template>
        <button type="button" class="btn btn-outline-light" [ngbPopover]="popContent" placement="left-bottom" popoverTitle="Fancy content">
         aa
        </button>
      </li>-->

  </ul>

</div>

<!-------------------------------------------------------------------------->
<!--<button class="open-button" (click)="openChatWindow=true">Chat</button>-->

<div *ngIf="chatWindows.length>0&&openChatWindow"
     [ngClass]="{'right-direction':direction=='rtl','left-direction':direction=='ltr'}"
     class=" chat-popup">
  <div class="row">

    <form #_i="ngForm" *ngFor="let chatWindow of chatWindows ;let i=index" class="form-container "
          [appMinimize]="minimizeChatWindow" (ngSubmit)="send(i)">
      <div class="row">
        <div class="col-md-8">
          <button (click)="minimizeChatWindow=!minimizeChatWindow" type="button"
                  style="width: 225px;height:100%;background-color:#444444;color: white " class="btn ">{{chatWindow.windowName}}
          </button>
        </div>
        <div class="col-md-4">
          <button (click)="closeWindow(i)" style="background-color: red;color:blue" type="button"
                  class="btn btn-warning">Close
          </button>
        </div>
      </div>
      <div #scrollMe class="form-container-show pre-scrollable" style="overflow:-moz-scrollbars-vertical ">
        <div class="text-center " data-toggle="tooltip" data-placement="right" [title]="message.date"
             [ngStyle]="{color:message.messageFrom!=userName?'yellow':'blue'}"
             *ngFor="let message of chatWindow.chat">{{message.message }}</div>
      </div>
      <textarea rows="3" placeholder="Type message.." name="message" ngModel [(ngModel)]="chatWindow.message"
                required></textarea>

      <button type="submit" class="btn" style="color:white;background-color:lime">Send</button>
    </form>

  </div>
</div>



